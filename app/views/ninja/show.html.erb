<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '552169418265191',
      xfbml      : true,
      version    : 'v2.4'
    });
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/all.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));


</script>
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "3a0ec0e6-d422-4f23-8139-69853164ceed", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>
<script src="//maps.google.com/maps/api/js?v=3.13&sensor=false&libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>
<div class="container">
<div class="collapse navbar-collapse" id="myNavbar">
<ul class="nav navbar-nav pull-right" >
						<li  data-toggle="modal" data-target="#loginModal">
						<a href="#">Login&nbsp;<i class="fa fa-user fa-1x"></i> </a>
						</li>
						<li  data-toggle="modal" data-target="#RegisterHost">
							<a href="#">Register as Host&nbsp;<i class="fa fa-unlock fa-1x"></i></a>
						</li>
</ul>	
<div class="page-header">
    <h1>Welcome,<small>User</small></h1>
   
</div>

<!-- Metro Tiles - START -->
  <div id="fb-root"></div>
<div
  class="fb-like"
  data-share="true"
  data-width="450"
  data-show-faces="true">
</div>
  <div class="fb-share-button"
       data-href="http://sreec.sdf.org/app"
       data-layout="button_count">
  </div>

  <div id="facebook_invite">
    <script src="http://connect.facebook.net/en_US/all.js"></script>
    <a href="#" onclick="FBInvite()">Invite Facebook Friends</a>

  </div>
  <span class='st_facebook_large' displayText='Facebook'></span>
  <span class='st_twitter_large' displayText='Tweet'></span>
  <span class='st_email_large' displayText='Email'></span>
<div class="container dynamicTile">

  <script type="text/javascript">
      var contacts = [];
      var my
      var clientId = '1046587835668-kqmbksoi6j55rniunmsfb7ksmh072c5l.apps.googleusercontent.com';
      var apiKey = 'DEPdsjF7i65wAvw9-vFCkch5';
      var scopes = 'https://www.googleapis.com/auth/contacts.readonly';

      $(document).on("click",".googleContactsButton", function(){
          contacts = [];
          gapi.client.setApiKey(apiKey);
          window.setTimeout(authorize);
      });

      function authorize() {
          gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthorization);
      }

      function handleAuthorization(authorizationResult) {
          if (authorizationResult && !authorizationResult.error) {
              $.get("https://www.google.com/m8/feeds/contacts/default/thin?v=3.0&alt=json&access_token=" + authorizationResult.access_token + "&max-results=500&v=3.0",
                      function(response){
                          var myobj = jQuery.parseJSON(JSON.stringify(response));
                          //process the response here
                          for (var i=0;i<myobj.feed.entry.length;i++){
                              if (myobj.feed.entry[i].gd$email && myobj.feed.entry[i].gd$name) {
                                  var contact = {};
                                  contact['label']=myobj.feed.entry[i].gd$email[0].address;
                                  contact['name']=myobj.feed.entry[i].gd$name.gd$fullName.$t;
                                  contact['email']=myobj.feed.entry[i].gd$email[0].address;
                                  contacts.push(contact);
                              }
                          }
                      });
          }
      }
  </script>
  <script src="https://apis.google.com/js/client.js"></script>
  <button class="googleContactsButton">Get my contacts</button>
</div>
  <input type="text" id="tagsHere" />
    <div class="row">
     <div style='width: 100%'>
			<div id="map" style='width: 100%; height: 400px;'></div>
	</div>
        <div class="col-sm-4 col-xs-8">
            <div  id="tile7" class="tile">
                <div  class="carousel slide" data-ride="carousel">
                
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active">
                            <img src="https://www.prepbootstrap.com/Content/images/template/metrotiles/1.png" class="img-responsive" />
                        </div>
                        <div class="item">
                            <img src="https://www.prepbootstrap.com/Content/images/template/metrotiles/2.jpg" class="img-responsive" />
                        </div>
                        <div class="item">
                            <img src="https://www.prepbootstrap.com/Content/images/template/metrotiles/3.png" class="img-responsive" />
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-sm-2 col-xs-4">
            <div id="tile8" class="tile">

                <div class="carousel slide" data-ride="carousel">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active text-center">
                            <div>
                                <span class="fa fa-spinner bigicon"></span>
                            </div>
                            <div class="icontext">
                                Wait time
                            </div>
                            <div class="icontext">
                                Low
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-spinner bigicon"></span>
                            </div>
                            <div class="icontext">
                                Wait time
                            </div>
                            <div class="icontext">
                                Avarage
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-spinner bigicon"></span>
                            </div>
                            <div class="icontext">
                                Wait time
                            </div>
                            <div class="icontext">
                                Low
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-sm-2 col-xs-4">
            <div id="tile9" class="tile">
                <div class="carousel slide" data-ride="carousel">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active text-center">
                            <div>
                                <span class="fa fa-book bigicon"></span>
                            </div>
                            <div class="icontext">
                                Menu items
                            </div>
                            <div class="icontext">
                                120
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-book bigicon"></span>
                            </div>
                            <div class="icontext">
                                Menu items
                            </div>
                            <div class="icontext">
                                200
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-book bigicon"></span>
                            </div>
                            <div class="icontext">
                                Menu items
                            </div>
                            <div class="icontext">
                                75
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-sm-4 col-xs-8">
            <div id="tile10" class="tile">

                <div class="carousel slide" data-ride="carousel">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active text-center">
                            <div>
                                <span class="fa fa-phone bigicon"></span>
                            </div>
                            <div class="icontext">
                                000-0000-0000
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-phone bigicon"></span>
                            </div>
                            <div class="icontext">
                                111-1111-1111
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-phone bigicon"></span>
                            </div>
                            <div class="icontext">
                                222-2222-2222
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>


    <div class="row ">
        <div class="col-sm-2 col-xs-4">
            <div id="tile1" class="tile">
                <div class="carousel slide" data-ride="carousel">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active text-center">
                            <div>
                                <span class="fa fa-bank bigicon"></span>
                            </div>
                            <div class="icontext">
                                Capacity
                            </div>
                            <div class="icontext">
                                30
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-bank bigicon"></span>
                            </div>
                            <div class="icontext">
                                Capacity
                            </div>
                            <div class="icontext">
                                60
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-bank bigicon"></span>
                            </div>
                            <div class="icontext">
                                Capacity
                            </div>
                            <div class="icontext">
                                80
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-sm-2 col-xs-4">
            <div id="tile2" class="tile">

                <div class="carousel slide" data-ride="carousel">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active text-center">
                            <div>
                                <span class="fa fa-lock bigicon"></span>
                            </div>
                            <div class="icontext">
                                Available
                            </div>
                            <div class="icontext">
                                0
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-unlock bigicon"></span>
                            </div>
                            <div class="icontext">
                                Available
                            </div>
                            <div class="icontext">
                                20
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-unlock bigicon"></span>
                            </div>
                            <div class="icontext">
                                Available
                            </div>
                            <div class="icontext">
                                40
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-sm-2 col-xs-4">
            <div id="tile3" class="tile">

                <div class="carousel slide" data-ride="carousel">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active text-center">
                            <div>
                                <span class="fa fa-star bigicon"></span>
                            </div>
                            <div class="icontext">
                                Rating
                            </div>
                            <div class="icontext">
                                8.5
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-star bigicon"></span>
                            </div>
                            <div class="icontext">
                                Rating
                            </div>
                            <div class="icontext">
                                7.9
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-star bigicon"></span>
                            </div>
                            <div class="icontext">
                                Rating
                            </div>
                            <div class="icontext">
                                9.9
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-sm-2 col-xs-4">
            <div id="tile4" class="tile">

                <div class="carousel slide" data-ride="carousel">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active text-center">
                            <div>
                                <span class="fa fa-cab bigicon"></span>
                            </div>
                            <div class="icontext">
                                Cab
                            </div>
                            <div class="icontext">
                                <span class="fa fa-check"></span>
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-cab bigicon"></span>
                            </div>
                            <div class="icontext">
                                Cab
                            </div>
                            <div class="icontext">
                                <span class="fa fa-close"></span>
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-cab bigicon"></span>
                            </div>
                            <div class="icontext">
                                Cab
                            </div>
                            <div class="icontext">
                                <span class="fa fa-check"></span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-sm-2 col-xs-4">
            <div id="tile5" class="tile">

                <div class="carousel slide" data-ride="carousel">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active text-center">
                            <div>
                                <span class="fa fa-language bigicon"></span>
                            </div>
                            <div class="icontext">
                                International
                            </div>
                            <div class="icontext">
                                <span class="fa fa-check"></span>
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-language bigicon"></span>
                            </div>
                            <div class="icontext">
                                International
                            </div>
                            <div class="icontext">
                                <span class="fa fa-close"></span>
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-language bigicon"></span>
                            </div>
                            <div class="icontext">
                                International
                            </div>
                            <div class="icontext">
                                <span class="fa fa-check"></span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-sm-2 col-xs-4">
            <div id="tile6" class="tile">

                <div class="carousel slide" data-ride="carousel">
                    <!-- Wrapper for slides -->
                    <div class="carousel-inner">
                        <div class="item active text-center">
                            <div>
                                <span class="fa fa-wifi bigicondark"></span>
                            </div>
                            <div class="icontextdark">
                                Wifi
                            </div>
                            <div class="icontextdark">
                                <span class="fa fa-check"></span>
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-wifi bigicondark"></span>
                            </div>
                            <div class="icontextdark">
                                Wifi
                            </div>
                            <div class="icontextdark">
                                <span class="fa fa-close"></span>
                            </div>
                        </div>
                        <div class="item text-center">
                            <div>
                                <span class="fa fa-wifi bigicondark"></span>
                            </div>
                            <div class="icontextdark">
                                Wifi
                            </div>
                            <div class="icontextdark">
                                <span class="fa fa-check"></span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

  <div class="modal fade" id="signInHost" tabindex="-1" role="dialog" aria-labelledby="Login" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">Sign Up as a Host</h4>
        </div>

        <div class="modal-body">
          <%= form_for(resource, :html => {:class => 'form-horizontal'},as: resource_name, url: registration_path(resource_name)) do |f| %>

              <%= devise_error_messages! %>

              <div class="form-group">
                <label class="col-xs-3 control-label">Email</label>

                <div class="col-xs-6">
                  <%= f.email_field :email, autofocus: true ,class:"form-control",placeholder:"email"%>
                </div>

              </div>
              <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                  <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
              <% end %>


              <div class="form-group">
                <label class="col-xs-3 control-label">Password</label>
                <div class="col-xs-6">
                  <%= f.password_field :password, autocomplete: "off",class:"form-control",placeholder:"Password",placeholder:"Password",type:"password"%>
                </div>
              </div>



              <div class="form-group">
                <label class="col-xs-3 control-label">Re-Enter Password</label>
                <div class="col-xs-6">
                  <%= f.password_field :password_confirmation, autocomplete: "off" ,class:"form-control",placeholder:"Confirm Password",placeholder:"Password",type:"password"%>
                </div>
              </div>

              <div class="form-group">
                <label class="col-xs-3 control-label"></label>
                <div class="col-xs-6">
                  <%= link_to "Sign in with Facebook", "/auth/facebook", id: "sign_in" %>
                </div>
              </div>
              <div class="actions">
                <%= f.submit "Update" %>
              </div>
          <% end %>

        </div>
        <div class="modal-footer">
          <%= link_to "Loginwith devise", new_host_session_path, :class => 'navbar-link'  %>
        </div>
      </div>
    </div>
  </div>



  <div class="modal fade" id="SignInHost" tabindex="-1" role="dialog" aria-labelledby="Login" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title" id="signin_upHost">Sign in as a Host</h4>
        </div>

        <div class="modal-body">
          <div class="form-group", id="signinHostErrorMessages">
          </div>
          <%= form_for(resource,:html => {:class => 'form-horizontal'}, as: resource_name, url: session_path(resource_name)) do |f| %>

              <%= devise_error_messages! %>

              <div class="form-group">
                <label class="col-xs-3 control-label">Email</label>

                <div class="col-xs-6">
                  <%= f.email_field :email, autofocus: true ,id:"hostEmailSignin",class:"form-control",placeholder:"email"%>
                </div>

              </div>


              <div class="form-group">
                <label class="col-xs-3 control-label">Password</label>
                <div class="col-xs-6">
                  <%= f.password_field :password, autocomplete: "off",id:"hostSigninPasswd",class:"form-control",placeholder:"Password",placeholder:"Password",type:"password"%>
                </div>
              </div>

              <% if devise_mapping.rememberable? -%>
                  <div class="field">
                    <%= f.check_box :remember_me %>
                    <%= f.label :remember_me %>
                  </div>
              <% end -%>


              <div class="form-group">
                <label class="col-xs-3 control-label"></label>
                <div class="col-xs-6">
                  <%= link_to "Sign in with Facebook", "/auth/facebook", id: "sign_in" %>
                </div>
              </div>
              <div class="form-group">
                <li onclick="forgotPassword();">Forgot Password?</li>
              </div>
              <div class="form-group">
                <label class="col-xs-3 control-label"></label>
                <div class="col-xs-6">
                  <a href="#" onclick="hostSignup1();">Sign Up Here</a>
                </div>
              </div>
              <div class="form-group">
                <li onclick="callSignin();">Sign In</li>
              </div>
          <% end %>

        </div>
        <div class="modal-footer">
          <%= link_to "Loginwith devise", new_host_session_path, :class => 'navbar-link'  %>
        </div>
      </div>
    </div>
  </div>




  <div class="modal fade" id="RegisterHost" tabindex="-1" role="dialog" aria-labelledby="Login" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
						<h4 class="modal-title" id="signin_upHost">Sign Up as a Host</h4>
					</div>

					<div class="modal-body">
                      <div class="form-group", id="signupHostErrorMessages">
                      </div>
                      <%= form_for(resource, :html => {:class => 'form-horizontal'},as: resource_name, url: registration_path(resource_name)) do |f| %>

                          <%= devise_error_messages! %>

                          <div class="form-group">
                            <label class="col-xs-3 control-label">Email</label>

                            <div class="col-xs-6">
                              <%= f.email_field :email, autofocus: true ,id:"hostEmailSignup",class:"form-control",placeholder:"email"%>
                            </div>

                          </div>
                          <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
                              <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
                          <% end %>


                          <div class="form-group">
                            <label class="col-xs-3 control-label">Password</label>
                            <div class="col-xs-6">
                              <%= f.password_field :password, autocomplete: "off",id:"hostSignupPasswd",class:"form-control",placeholder:"Password",placeholder:"Password",type:"password"%>
                            </div>
                          </div>



                          <div class="form-group" id="showConfirmPasswordHost">
                            <label class="col-xs-3 control-label">Re-Enter Password</label>
                            <div class="col-xs-6">
                              <%= f.password_field :password_confirmation, autocomplete: "off",id:"hostSignupPasswdConf" ,class:"form-control",placeholder:"Confirm Password",placeholder:"Password",type:"password"%>
                            </div>
                          </div>

                          <div class="form-group">
                            <label class="col-xs-3 control-label"></label>
                            <div class="col-xs-6">
                              <%= link_to "Sign in with Facebook", "/auth/facebook", id: "sign_in" %>
                            </div>
                          </div>

                          <div class="form-group">
                            <label class="col-xs-3 control-label"></label>
                            <div class="col-xs-6">
                              <a href="#" onclick="hostSignup();">Already Registered?</a>
                            </div>
                          </div>

                          <div class="form-group">
                            <li onclick="callSignup();">Sign Up</li>
                          </div>
                      <% end %>

                    </div>
                  <div class="modal-footer">
                          <%= link_to "Loginwith devise", new_host_session_path, :class => 'navbar-link'  %>
                  </div>
				</div>
		</div>
	</div>   
</div>
<style>
    .dynamicTile .col-sm-2.col-xs-4 {
        padding: 5px;
    }

    .bigicon {
        font-size: 67px;
        color: white;
        margin-top: 20px;
        margin-bottom: 10px;
    }

    .icontext {
        color: white;
        font-size: 27px;
    }

    .bigicondark {
        font-size: 67px;
        color: black;
        margin-top: 20px;
        margin-bottom: 10px;
    }

    .icontextdark {
        color: black;
        font-size: 27px;
    }

    .dynamicTile .col-sm-4.col-xs-8 {
        padding: 5px;
    }

    #tile1 {
        background: #7C91C7;
    }

    #tile2 {
        background: #3B579D;
    }

    #tile3 {
        background: #153178;
    }

    #tile4 {
        background: #EACF46;
    }

    #tile5 {
        background: #EACF46;
    }

    #tile6 {
        background: #FFED94;
    }

    #tile7 {
        background: white;
    }

    #tile8 {
        background: #03133C;
    }

    #tile9 {
        background: #EACF46;
    }

    #tile10 {
        background: #EACF46;
    }

    .tilecaption {
        position: relative;
        top: 50%;
        transform: translateY(-50%);
        -webkit-transform: translateY(-50%);
        -ms-transform: translateY(-50%);
        margin: 0!important;
        text-align: center;
        color: white;
        font-family: Segoe UI;
        font-weight: lighter;
    }
</style>

<script type="text/javascript">
$(document).ready(function () {
    $(".tile").height($("#tile1").width());
    $(".carousel").height($("#tile1").width());
    $(".item").height($("#tile1").width());

    $(window).resize(function () {
        if (this.resizeTO) clearTimeout(this.resizeTO);
        this.resizeTO = setTimeout(function () {
            $(this).trigger('resizeEnd');
        }, 10);
    });

    $(window).bind('resizeEnd', function () {
        $(".tile").height($("#tile1").width());
        $(".carousel").height($("#tile1").width());
        $(".item").height($("#tile1").width());
    });

});


handler = Gmaps.build('Google');
var markers;
handler.buildMap({ internal: {id: 'map'}}, function(){
  var json_array = [
    { lat: 17.465721, lng: 78.365975, name: 'SRI KRISHNA RESIDENCY', infowindow: "Maa chudaa" },
    { lat: 17.466180, lng: 78.367853, name: 'SOFA WORLD', infowindow: "Bhak bhosadike" },
    { lat: 17.465499, lng: 78.367067, name: 'BALAJI RESIDENCY', infowindow: "Gandu" }
  ];

  markers = handler.addMarkers(json_array);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});
$("#tile7").hover(function(){
    markers[0].setMap(handler.getMap()); //because clusterer removes map property from marker
    markers[0].panTo();
    google.maps.event.trigger(markers[0].getServiceObject(), 'click');;
});
$("#tile8").hover(function(){
    markers[1].setMap(handler.getMap()); //because clusterer removes map property from marker
    markers[1].panTo();
    google.maps.event.trigger(markers[1].getServiceObject(), 'click');;
});
$("#tile9").hover(function(){
    markers[2].setMap(handler.getMap()); //because clusterer removes map property from marker
    markers[2].panTo();
    google.maps.event.trigger(markers[2].getServiceObject(), 'click');
});

 function hostSignup(){

     $('#RegisterHost').modal('hide');
     $('#SignInHost').modal('show');
 }

function hostSignup1(){
    $('#SignInHost').modal('hide');
    $('#RegisterHost').modal('show');

}

function callSignup() {
    var email=document.getElementById('hostEmailSignup').value;
    var passwd=document.getElementById('hostSignupPasswd').value;
    var confirm_passwd=document.getElementById('hostSignupPasswdConf').value;
    $.ajax({
        url: "<%= '/hosts' %>", // Route to the Script Controller method
        type: "POST",
        dataType: "json",
        data: {host:{ email: email,password:passwd,password_confirmation:confirm_passwd}},
        complete: function() {},
        success: function(data) {
            var myerrordivtag=document.getElementById("signupHostErrorMessages");
            myerrordivtag.innerHTML="";
            var colClass = document.createElement('p');
            colClass.innerHTML= 'Thanks, an email has been sent to '+email+' please click on the confirmation link in the mail to continue';
            myerrordivtag.appendChild(colClass);
        },
        error: function(xhr, status, error) {
            console.log(xhr.responseText);
            var myError = jQuery.parseJSON( xhr.responseText );
            console.log(myError);
            var myerrordivtag=document.getElementById("signupHostErrorMessages");
            myerrordivtag.innerHTML="";
            if (myError.errors.email!=null) {
                var colClass = document.createElement('p');
                colClass.innerHTML= 'Email '+myError.errors.email;
                myerrordivtag.appendChild(colClass);
            }
            if (myError.errors.password!=null) {
                var colClass = document.createElement('p');
                colClass.innerHTML= 'Password '+myError.errors.password;
                myerrordivtag.appendChild(colClass);
            }
            if (myError.errors.password_confirmation!=null) {
                var colClass = document.createElement('p');
                colClass.innerHTML= 'Passwords '+myError.errors.password_confirmation;
                myerrordivtag.appendChild(colClass);
            }
        }
    });
}


function callSignin() {
    var email=document.getElementById('hostEmailSignin').value;
    var passwd=document.getElementById('hostSigninPasswd').value;
    $.ajax({
        url: "<%= '/hosts/sign_in' %>", // Route to the Script Controller method
        type: "POST",
        dataType: "json",
        data: {host:{ email: email,password:passwd}},
        complete: function() {},
        success: function(data) {
            var myerrordivtag=document.getElementById("signinHostErrorMessages");
            myerrordivtag.innerHTML="";
            var colClass = document.createElement('p');
            myerrordivtag.appendChild(colClass);
        },
        error: function(xhr, status, error) {
            console.log(xhr.responseText);
            var myError = jQuery.parseJSON( xhr.responseText );
            console.log(myError);
            var myerrordivtag=document.getElementById("signinHostErrorMessages");
            myerrordivtag.innerHTML="";
                var colClass = document.createElement('p');
                colClass.innerHTML=myError.error;
                myerrordivtag.appendChild(colClass);


        }
    });
}
function forgotPassword() {
    var email=document.getElementById('hostEmailSignin').value;
    if (!email) {
        var myerrordivtag=document.getElementById("signinHostErrorMessages");
        myerrordivtag.innerHTML="";
        var colClass = document.createElement('p');
        colClass.innerHTML='Email field cannot be blank';
        myerrordivtag.appendChild(colClass)
        return;
    }
    $.ajax({
        url: "<%= '/hosts/password' %>", // Route to the Script Controller method
        type: "POST",
        dataType: "json",
        data: {host:{ email: email}},
        complete: function() {},
        success: function(data) {
            var myerrordivtag=document.getElementById("signinHostErrorMessages");
            myerrordivtag.innerHTML="";
            var colClass = document.createElement('p');
            colClass.innerHTML=data.info;
            myerrordivtag.appendChild(colClass);
        },
        error: function(xhr, status, error) {
            console.log(xhr.responseText);
            var myError = jQuery.parseJSON( xhr.responseText );
            console.log(myError);
            var myerrordivtag=document.getElementById("signinHostErrorMessages");
            myerrordivtag.innerHTML="";
            var colClass = document.createElement('p');
            colClass.innerHTML=myError.error;
            myerrordivtag.appendChild(colClass);


        }
    });
}

</script>

<script>
    FB.init({
        appId:'552169418265191',
        cookie:true,
        status:true,
        xfbml:true
    });

    function FBInvite(){
        FB.ui({
            method: 'apprequests',
            message: 'Hey, I used Froodlr and liked it. I know you will too. Give it a shot'},
                function(response)
                {
                    if (response) {
                    alert('cool!');
                }
        });
    }

    function custom_source(request, response) {
        var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
        response($.grep(contacts, function(value) {
            var myresponse =  matcher.test(value.name)
                    || matcher.test(value.email);
            return matcher.test(value.name)
                    || matcher.test(value.email);
        }));
    }

    $("#tagsHere").autocomplete({

        source: custom_source,
        minLength: 0,
        select: function(event, ui) {
            console.log(ui);
        }
    });
</script>